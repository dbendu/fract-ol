typedef struct		s_complex
{
	double		re;
	double		im;
}					t_complex;


__kernel void	eval(__global int *data, int width, int height, int threads, double x_offset, double y_offset, float zoom, int iters)
{
	int				id;
	int				iter;
	int				x;
	int				y;
	t_complex		c;
	t_complex		point;
	t_complex		temp;

	id = get_global_id(0);
	y = id / height;
	x = id % height;

	iter = 0;
	c.re = (x - width / 2) / zoom + x_offset;
	c.im = (height / 2 - y) / zoom + y_offset;
	point = c;
	while (iter < iters && point.re * point.re + point.im * point.im <= 4)
	{
		temp = point;
		point.re = temp.re * temp.re - temp.im * temp.im + c.re;
		point.im = 2 * temp.re * temp.im + c.im;
		++iter;
	}
	if (iter < iters)
		data[y * width + x] = 0xFFFFFF;
	else
		data[y * width + x] = 0x0;
}
